<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UFA League 2026 | Official Draft Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --ufa-navy: #0f172a;
            --ufa-gold: #eab308;
            --ufa-bg: #f1f5f9;
            --bento-card-bg: #ffffff;
            --skeuo-outer: 0 10px 15px -3px rgba(0,0,0,0.08), 0 4px 6px -4px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.02);
            --skeuo-inner: inset 0 2px 4px 0 rgba(0,0,0,0.03);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--ufa-bg);
            color: var(--ufa-navy);
            height: 1080px;
            width: 1920px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: background-color 0.5s ease;
        }

        .bento-card {
            background: var(--bento-card-bg);
            border-radius: 24px;
            box-shadow: var(--skeuo-outer);
            border: 1px solid rgba(255, 255, 255, 0.8);
            display: flex;
            flex-direction: column;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .skeuo-button {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            box-shadow: 2px 2px 4px #cbd5e1, -1px -1px 4px #ffffff;
            border: 1px solid #f1f5f9;
            transition: all 0.15s ease;
        }

        .skeuo-button:hover:not(.drafted) {
            transform: translateY(-1px);
            box-shadow: 4px 4px 8px #cbd5e1, -2px -2px 8px #ffffff;
        }

        .skeuo-button:active {
            box-shadow: inset 2px 2px 4px #cbd5e1, inset -2px -2px 4px #ffffff;
            transform: scale(0.98);
        }

        .skeuo-inset {
            background: #f8fafc;
            box-shadow: var(--skeuo-inner);
            border-radius: 16px;
        }

        /* Dynamic Team Colors */
        .team-0 { border-top: 8px solid #3b82f6; } 
        .team-1 { border-top: 8px solid #10b981; } 
        .team-2 { border-top: 8px solid #ef4444; } 
        .team-3 { border-top: 8px solid #8b5cf6; } 
        .team-4 { border-top: 8px solid #f97316; } 

        .active-team {
            animation: pulse-border 1.5s infinite alternate;
            background: #fffdf5;
            transform: translateY(-4px) scale(1.02);
            z-index: 50;
        }

        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0px rgba(234, 179, 8, 0.2); }
            100% { box-shadow: 0 0 30px 5px rgba(234, 179, 8, 0.3); }
        }

        .kds-active {
            border: 4px dashed var(--ufa-gold);
            cursor: pointer;
        }
        .kds-active:hover {
            background: #fefce8;
            transform: translateY(-4px);
        }

        .drafted {
            opacity: 0.15;
            filter: grayscale(1);
            pointer-events: none;
            background: #f1f5f9;
            box-shadow: none;
        }

        .slot-row {
            border-bottom: 1px solid #f1f5f9;
            padding: 6px 0;
        }
        .slot-row:last-child { border-bottom: none; }

        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }

        /* Completion Layout Transforms */
        .completed #pool-container {
            display: none !important;
        }
        .completed #team-grid {
            grid-column: span 12 / span 12;
            display: grid !important;
            grid-template-columns: repeat(5, 1fr) !important;
            grid-template-rows: 52% 45% !important; /* History takes bottom 45% */
            gap: 1.5rem !important;
            height: 100%;
        }
        .completed #team-0, .completed #team-1, .completed #team-2, .completed #team-3, .completed #team-4 {
            grid-row: 1 / 2;
            height: 100%;
        }
        .completed #log-card {
            display: flex !important;
            grid-row: 2 / 3;
            grid-column: 1 / 6;
            height: 100%;
        }
        /* Make log items side-by-side in footer */
        .completed #draft-log {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.4rem 1.5rem;
            align-content: start;
        }
        /* Increase for final rosters */
        .completed .slot-row span.player-name {
            font-size: 1.25rem !important;
            line-height: 1.3;
        }
        .completed .team-name {
            font-size: 2.25rem; /* Large and bold for final frame */
        }
        
        /* Hover Export Style */
        .btn-export {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-export:hover {
            background: var(--ufa-gold);
            color: var(--ufa-navy);
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(234, 179, 8, 0.4);
        }
    </style>
</head>
<body class="p-8" id="main-body">

    <!-- Header -->
    <header class="flex justify-between items-center mb-6 h-20">
        <div class="flex items-center gap-6">
            <img src="webBanner.png" alt="UFA Logo" class="h-16 w-auto object-contain" onerror="this.style.display='none'; document.getElementById('logo-fallback').style.display='flex'">
            <div id="logo-fallback" class="hidden bg-slate-900 w-16 h-16 rounded-xl items-center justify-center text-white font-black text-2xl shadow-xl">U</div>
            <div>
                <h1 class="text-4xl font-black tracking-tighter text-slate-900 uppercase leading-none mb-1">League 2026 <span class="text-amber-500">Draft</span></h1>
                <p class="text-slate-400 font-bold text-lg tracking-[0.1em] uppercase" id="view-mode">KDS SLOT SELECTION PHASE</p>
            </div>
        </div>
        <div class="flex items-center gap-4">
            <div id="kds-order-display" class="flex gap-2 mr-4"></div>
            <div id="draft-status" class="px-8 py-3 bg-slate-900 text-amber-400 rounded-xl font-black text-xl tracking-widest shadow-xl uppercase border-b-4 border-amber-600 transition-all">
                Initializing KDS...
            </div>
        </div>
    </header>

    <main class="flex-1 grid grid-cols-12 gap-6 min-h-0">
        
        <!-- Left: Teams + History -->
        <div id="team-grid" class="col-span-8 grid grid-cols-3 grid-rows-2 gap-6 min-h-0">
            
            <div id="team-0" class="bento-card p-6 team-0">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-black uppercase text-slate-300 team-name truncate">Team 01</h2>
                    <span class="text-[10px] font-black px-2 py-0.5 bg-slate-100 rounded-full text-slate-400">9 SLOTS</span>
                </div>
                <div class="flex-1 skeuo-inset p-4 overflow-hidden" id="slots-0"></div>
            </div>

            <div id="team-1" class="bento-card p-6 team-1">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-black uppercase text-slate-300 team-name truncate">Team 02</h2>
                    <span class="text-[10px] font-black px-2 py-0.5 bg-slate-100 rounded-full text-slate-400">9 SLOTS</span>
                </div>
                <div class="flex-1 skeuo-inset p-4 overflow-hidden" id="slots-1"></div>
            </div>

            <div id="team-2" class="bento-card p-6 team-2">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-black uppercase text-slate-300 team-name truncate">Team 03</h2>
                    <span class="text-[10px] font-black px-2 py-0.5 bg-slate-100 rounded-full text-slate-400">9 SLOTS</span>
                </div>
                <div class="flex-1 skeuo-inset p-4 overflow-hidden" id="slots-2"></div>
            </div>

            <div id="team-3" class="bento-card p-6 team-3">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-black uppercase text-slate-300 team-name truncate">Team 04</h2>
                    <span class="text-[10px] font-black px-2 py-0.5 bg-slate-100 rounded-full text-slate-400">9 SLOTS</span>
                </div>
                <div class="flex-1 skeuo-inset p-4 overflow-hidden" id="slots-3"></div>
            </div>

            <div id="team-4" class="bento-card p-6 team-4">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-black uppercase text-slate-300 team-name truncate">Team 05</h2>
                    <span class="text-[10px] font-black px-2 py-0.5 bg-slate-100 rounded-full text-slate-400">8 SLOTS</span>
                </div>
                <div class="flex-1 skeuo-inset p-4 overflow-hidden" id="slots-4"></div>
            </div>

            <!-- History Log -->
            <div id="log-card" class="bento-card p-6 bg-slate-900 text-white">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-8 h-8 rounded-lg bg-amber-500 flex items-center justify-center shadow-lg">
                        <svg class="w-5 h-5 text-slate-900" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"></path></svg>
                    </div>
                    <h2 class="text-lg font-black uppercase tracking-widest">Draft History</h2>
                </div>
                <div id="draft-log" class="flex-1 overflow-y-auto text-xs space-y-2 font-medium custom-scrollbar pr-2">
                    <div class="text-slate-500 italic">Waiting for first pick...</div>
                </div>
            </div>
        </div>

        <!-- Right: Player Pool -->
        <div class="col-span-4 bento-card p-8 min-h-0" id="pool-container" style="opacity: 0.5; pointer-events: none;">
            <div class="flex justify-between items-end mb-6">
                <h2 class="text-2xl font-black uppercase tracking-tighter">Athletes</h2>
                <div class="relative w-48">
                    <input type="text" id="player-search" placeholder="Search..." class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2 pl-10 focus:ring-4 focus:ring-amber-500/20 outline-none text-sm font-bold transition-all">
                    <svg class="w-5 h-5 absolute left-3 top-2.5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
            </div>

            <div id="player-pool" class="flex-1 grid grid-cols-3 gap-x-2 gap-y-2 content-start overflow-hidden">
                <!-- Players dynamically loaded -->
            </div>

            <div class="mt-6 pt-6 border-t border-slate-100 h-20 flex items-center justify-between">
                <div>
                    <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5">Next in Line</p>
                    <div id="up-next" class="flex gap-2"></div>
                </div>
                <div class="text-right">
                    <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5">Progress</p>
                    <div id="pick-progress" class="text-3xl font-black text-slate-900">0 / 39</div>
                </div>
            </div>
        </div>
    </main>

    <script>
        const ANCHORS = [
            { id: 1, name: "Philip", isAnchor: true },
            { id: 2, name: "Azim", isAnchor: true },
            { id: 3, name: "Zayyan", isAnchor: true },
            { id: 4, name: "Rizam", isAnchor: true },
            { id: 5, name: "Mode", isAnchor: true }
        ];

        const POOL_PLAYERS = [
            { id: 6, name: "Shamin" }, { id: 7, name: "Miph" }, { id: 8, name: "Fauz" }, 
            { id: 9, name: "Finn" }, { id: 10, name: "Afrah" }, { id: 11, name: "Aahil" }, 
            { id: 12, name: "Aisha" }, { id: 13, name: "Amsal" }, { id: 14, name: "Aryf" }, 
            { id: 15, name: "Babaa" }, { id: 16, name: "Eijaz" }, { id: 17, name: "Hamko" }, 
            { id: 18, name: "Hassaan" }, { id: 19, name: "Imma" }, { id: 20, name: "Jef" }, 
            { id: 21, name: "Jilaau" }, { id: 22, name: "Jin" }, { id: 23, name: "Junayd" }, 
            { id: 24, name: "Kaitlinn" }, { id: 25, name: "Kat" }, { id: 26, name: "Lamath" }, 
            { id: 27, name: "Ma'an" }, { id: 28, name: "Maahy" }, { id: 29, name: "Maeesh" }, 
            { id: 30, name: "Malaka" }, { id: 31, name: "Mateo" }, { id: 32, name: "Miju" }, 
            { id: 33, name: "Moadz" }, { id: 34, name: "Muky" }, { id: 35, name: "Nawaz" }, 
            { id: 36, name: "Piko" }, { id: 37, name: "Saam" }, { id: 38, name: "Shaaif" }, 
            { id: 39, name: "Shazeen" }, { id: 40, name: "Tanzeem" }, { id: 41, name: "Uraiba" }, 
            { id: 42, name: "Yoosuf" }, { id: 43, name: "Ewan" }, { id: 44, name: "Mushaan" }
        ].sort((a, b) => a.name.localeCompare(b.name));

        const teams = [
            { id: 0, name: "Team 01", anchor: null, players: [], max: 9, color: '#3b82f6' },
            { id: 1, name: "Team 02", anchor: null, players: [], max: 9, color: '#10b981' },
            { id: 2, name: "Team 03", anchor: null, players: [], max: 9, color: '#ef4444' },
            { id: 3, name: "Team 04", anchor: null, players: [], max: 9, color: '#8b5cf6' },
            { id: 4, name: "Team 05", anchor: null, players: [], max: 8, color: '#f97316' }
        ];

        let phase = 'KDS';
        let kdsOrder = [];
        let kdsIndex = 0;
        let draftOrder = [];
        let currentPickIndex = 0;
        let draftedIds = new Set();
        let logData = [];

        function init() {
            kdsOrder = [...ANCHORS].sort(() => Math.random() - 0.5);
            renderKDSUI();
            renderPlayers();
            renderTeams();
            updateDraftState();
            document.getElementById('player-search').addEventListener('input', renderPlayers);
            for(let i=0; i<5; i++) {
                document.getElementById(`team-${i}`).onclick = () => selectKDSSlot(i);
                document.getElementById(`team-${i}`).classList.add('kds-active');
            }
        }

        function renderKDSUI() {
            const display = document.getElementById('kds-order-display');
            display.innerHTML = '';
            kdsOrder.forEach((anchor, i) => {
                const badge = document.createElement('div');
                badge.className = `px-4 py-1.5 rounded-lg text-[10px] font-black uppercase transition-all shadow-md ${i === kdsIndex ? 'bg-amber-500 text-white animate-pulse' : 'bg-slate-200 text-slate-500'}`;
                badge.innerText = `${i+1}. ${anchor.name}`;
                display.appendChild(badge);
            });
            if (phase === 'KDS') {
                document.getElementById('draft-status').innerText = `${kdsOrder[kdsIndex].name} - Select Your Draft Position`;
            }
        }

        function selectKDSSlot(teamIdx) {
            if (phase !== 'KDS') return;
            if (teams[teamIdx].anchor) return;
            const anchor = kdsOrder[kdsIndex];
            teams[teamIdx].anchor = anchor;
            teams[teamIdx].name = anchor.name.toUpperCase();
            const card = document.getElementById(`team-${teamIdx}`);
            card.classList.remove('kds-active');
            card.querySelector('.team-name').innerText = teams[teamIdx].name;
            card.querySelector('.team-name').classList.remove('text-slate-300');
            card.querySelector('.team-name').classList.add('text-slate-900');
            anchor.pickedInRound = 0;
            teams[teamIdx].players.push(anchor);
            kdsIndex++;
            if (kdsIndex >= 5) {
                startDraftPhase();
            } else {
                renderKDSUI();
            }
            renderTeams();
        }

        function startDraftPhase() {
            phase = 'DRAFT';
            document.getElementById('view-mode').innerText = 'OFFICIAL PLAYER DRAFT PHASE';
            document.getElementById('pool-container').style.opacity = '1';
            document.getElementById('pool-container').style.pointerEvents = 'auto';
            document.getElementById('kds-order-display').innerHTML = '<span class="text-xs font-black text-slate-400 uppercase tracking-[0.2em]">KDS Phase Concluded</span>';
            
            draftOrder = [];
            for(let i=4; i>=0; i--) draftOrder.push({ team: i, round: 2 });
            for(let i=4; i>=0; i--) draftOrder.push({ team: i, round: 3 });
            for(let r=4; r<=10; r++) {
                if(r % 2 === 0) { 
                    for(let i=0; i<5; i++) draftOrder.push({ team: i, round: r });
                } else { 
                    for(let i=4; i>=0; i--) draftOrder.push({ team: i, round: r });
                }
            }
            
            for(let i=0; i<5; i++) {
                document.getElementById(`team-${i}`).onclick = null;
                document.getElementById(`team-${i}`).style.cursor = 'default';
            }
            updateDraftState();
        }

        function renderPlayers() {
            const container = document.getElementById('player-pool');
            const search = document.getElementById('player-search').value.toLowerCase();
            container.innerHTML = '';
            POOL_PLAYERS.forEach(player => {
                if (player.name.toLowerCase().includes(search)) {
                    const isDrafted = draftedIds.has(player.id);
                    const el = document.createElement('div');
                    el.className = `skeuo-button px-2 py-2.5 rounded-xl flex items-center justify-between transition-all ${isDrafted ? 'drafted' : 'cursor-pointer'}`;
                    el.onclick = () => !isDrafted && draftPlayer(player.id);
                    el.innerHTML = `
                        <div class="flex items-center gap-2 overflow-hidden">
                            <div class="w-6 h-6 rounded-lg bg-slate-100 flex-shrink-0 flex items-center justify-center font-black text-[10px] text-slate-400">
                                ${player.name[0]}
                            </div>
                            <span class="font-bold text-xs text-slate-700 truncate">${player.name}</span>
                        </div>
                    `;
                    container.appendChild(el);
                }
            });
        }

        function renderTeams() {
            teams.forEach((team, idx) => {
                const slots = document.getElementById(`slots-${idx}`);
                slots.innerHTML = '';
                for(let i=0; i<team.max; i++) {
                    const p = team.players[i];
                    const row = document.createElement('div');
                    row.className = 'slot-row flex items-center gap-2';
                    row.innerHTML = `
                        <span class="w-5 text-[10px] font-black text-slate-300">#${i+1}</span>
                        <span class="flex-1 font-bold text-slate-800 text-sm tracking-tight player-name">${p ? p.name : ''}</span>
                        ${p ? `<span class="text-[8px] font-black text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded">${p.pickedInRound === 0 ? 'SEED 0' : 'R'+p.pickedInRound}</span>` : ''}
                    `;
                    slots.appendChild(row);
                }
            });
        }

        function draftPlayer(id) {
            if (phase !== 'DRAFT' || currentPickIndex >= draftOrder.length) return;
            
            const player = POOL_PLAYERS.find(p => p.id === id);
            const currentPick = draftOrder[currentPickIndex];
            const team = teams[currentPick.team];

            if (team.players.length >= team.max) {
                currentPickIndex++;
                draftPlayer(id);
                return;
            }

            player.pickedInRound = currentPick.round;
            team.players.push(player);
            draftedIds.add(id);
            logData.push({ pick: draftedIds.size, player: player.name, team: team.name, color: team.color, round: currentPick.round });

            renderLog();
            currentPickIndex++;
            renderPlayers();
            renderTeams();
            updateDraftState();
        }

        function renderLog() {
            const log = document.getElementById('draft-log');
            log.innerHTML = '';
            
            // During draft, we want chronological order in DOM for final layout, 
            // but we can scroll to bottom to see latest.
            logData.forEach(item => {
                const div = document.createElement('div');
                div.className = "flex justify-between items-center text-slate-200 border-b border-slate-800/50 pb-1.5 animate-in fade-in slide-in-from-left";
                div.innerHTML = `
                    <div class="flex gap-2 items-center">
                        <span class="font-black text-sm px-1.5 py-0.5 rounded bg-slate-800" style="color: ${item.color}">P${item.pick}</span>
                        <span class="font-bold text-white text-base">${item.player}</span>
                    </div>
                    <span class="text-[10px] uppercase font-black text-slate-500">${item.team}</span>
                `;
                log.appendChild(div);
            });
            
            // Scroll to bottom during draft
            if (!document.getElementById('main-body').classList.contains('completed')) {
                log.scrollTop = log.scrollHeight;
            }
        }

        function exportToClipboard() {
            let output = "UFA LEAGUE 2026 - OFFICIAL DRAFT RESULTS\n";
            output += "========================================\n\n";
            
            output += "TEAM ROSTERS:\n";
            teams.forEach(t => {
                output += `\n[ ${t.name} ]\n`;
                t.players.forEach((p, i) => {
                    output += `${i+1}. ${p.name} (${p.pickedInRound === 0 ? 'Anchor' : 'Pick ' + p.pickedInRound})\n`;
                });
            });

            output += "\n\nDRAFT PICK ORDER:\n";
            logData.forEach(l => {
                output += `Pick ${l.pick}: ${l.player} -> ${l.team} (Round ${l.round})\n`;
            });

            const el = document.createElement('textarea');
            el.value = output;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);

            const status = document.getElementById('draft-status');
            const originalText = status.innerText;
            status.innerText = "COPIED TO CLIPBOARD!";
            status.style.background = "#10b981";
            setTimeout(() => {
                status.innerText = "EXPORT DRAFT";
                status.style.background = "var(--ufa-gold)";
                status.style.color = "var(--ufa-navy)";
            }, 2000);
        }

        function updateDraftState() {
            document.querySelectorAll('.bento-card').forEach(c => c.classList.remove('active-team'));
            const count = draftedIds.size;
            document.getElementById('pick-progress').innerText = `${count} / 39`;
            
            if (phase === 'DRAFT') {
                if (count >= 39) {
                    const status = document.getElementById('draft-status');
                    status.innerText = "DRAFT COMPLETE";
                    status.classList.add('btn-export');
                    
                    // Button interaction
                    status.onmouseover = () => { status.innerText = "EXPORT DRAFT"; };
                    status.onmouseout = () => { status.innerText = "DRAFT COMPLETE"; };
                    status.onclick = exportToClipboard;

                    document.getElementById('main-body').classList.add('completed');
                    document.getElementById('view-mode').innerText = "SEASON 1 FINAL ROSTERS";
                    renderTeams(); 
                    renderLog();
                    return;
                }

                let pick = draftOrder[currentPickIndex];
                while(pick && teams[pick.team].players.length >= teams[pick.team].max) {
                    currentPickIndex++;
                    pick = draftOrder[currentPickIndex];
                }

                if (pick) {
                    const activeCard = document.getElementById(`team-${pick.team}`);
                    activeCard.classList.add('active-team');
                    document.getElementById('draft-status').innerText = `ROUND ${pick.round} | ${teams[pick.team].name} ON CLOCK`;

                    const nextPicks = document.getElementById('up-next');
                    nextPicks.innerHTML = '';
                    let found = 0;
                    for(let i=1; found < 3 && (currentPickIndex + i) < draftOrder.length; i++) {
                        const fut = draftOrder[currentPickIndex + i];
                        if(teams[fut.team].players.length < teams[fut.team].max) {
                            const el = document.createElement('div');
                            el.className = "skeuo-inset px-4 py-1.5 text-[10px] font-black uppercase text-slate-500 flex items-center gap-2";
                            el.innerHTML = `<div class="w-1.5 h-1.5 rounded-full" style="background: ${teams[fut.team].color}"></div> ${teams[fut.team].name}`;
                            nextPicks.appendChild(el);
                            found++;
                        }
                    }
                }
            }
        }

        window.onload = init;
    </script>
</body>
</html>
